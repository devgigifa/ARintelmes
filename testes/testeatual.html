<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AR Intelmes</title>
    <link rel="icon" href="https://img.icons8.com/ios_filled/200/40C057/info.png">
    
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <script src="testeatual.js"></script>

    <style>
        #a-scene {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
    
</head>

<body>
    <a-scene
        id="a-scene"
        embedded
        arjs="sourceType: webcam; debugUIEnabled: false;"
        camera="position: 0 1.6 0; fov: 100;" init-ar initGauges
    >

        <a-box id="grandbox"
            position="0 1.25 -3"
            rotation="0 0 0"
            color="#000000"
            scale="2 1 0.5"
        >
        </a-box>

        <a-text id="hours"
            value="4 h" 
            color="white" 
            width="1.3"
            scale="1.2 0.7 1.2" 
            position="-0.7 1.65 -2.4" 
            align="center"
        >
        </a-text>

        <a-text id="perf"
            color="white" 
            width="1.3"
            scale="1 0.5 1" 
            position="0.47 1.65 -2.4"
        >
        </a-text>
        <a-text id="itemtool"
            color="white" 
            width="1.3"
            scale="1 0.5 1" 
            position="0.47 1.60 -2.4"
        >
        </a-text>

        <a-text id="rescode"
            color="white" 
            width="1.3"
            scale="3 1.8 3" 
            position="0 1.57 -2.4" 
            align="center"
        >
        </a-text>

        <a-text id="status"
            color="white" 
            width="1.3"
            scale="2.3 1 2.3" 
            position="0 1.43 -2" 
            align="center"
        >
        </a-text>
    
        <!-- Barra de Produção -->
        <a-entity position="0 1.43 -2.2" frustumCulled="false">
            <a-box 
                position="0 0 0"  
                scale="0 0.1 0.1"  
                color="darkgreen" 
                id="production-bar"
            ></a-box>
        </a-entity>

        <a-text 
            id="statusPercentage"
            value=""
            color="white" 
            width="1.3"
            scale="1.5 0.9 1.5" 
            position="0 1.3 -2.4" 
            align="center"
        >
        </a-text> 

        <!-- ............... -->

        <a-entity line="start: -0.8 1.25 -2.4; end: 0.8 1.25 -2.4; color: white"></a-entity>

        <a-text id="tc" value="TC" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.79 1.2 -2.4" 
        >
        </a-text>
        <a-text id="cycletime" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.75 1.15 -2.4" 
            align="center"
        >
        </a-text>  

        <a-text id="op" value="OP" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.45 1.2 -2.4" 
            align="center"
        >
        </a-text>
        <a-text id="operationcode" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.45 1.15 -2.4" 
            align="center"
        >
        </a-text>  

        <a-text id="qtd" value="QTD" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.15 1.2 -2.4" 
            align="center"
        >
        </a-text>
        <a-text id="quantity" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.15 1.15 -2.4" 
            align="center"
        >
        </a-text>  

        <a-text id="qtdprod" value="QTD PROD" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.14 1.2 -2.4" 
            align="center"
        >
        </a-text>
        <a-text id="quantityprod" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.14 1.15 -2.4" 
            align="center"
        >
        </a-text>  

        <a-text id="ref" value="REF" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.40 1.2 -2.4" 
            align="center"
        >
        </a-text>
        <a-text id="scrapquantity" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.40 1.15 -2.4" 
            align="center"
        >
        </a-text>

        <a-text id="qtdboa" value="QTD BOA"
            color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.65 1.2 -2.4" 
            align="center" 
        >
        </a-text>
        <a-text id="goodquantity" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="0.65 1.15 -2.4" 
            align="center"
        >
        </a-text>

        <a-entity line="start: -0.8 1.1 -2.4; end: 0.8 1.1 -2.4; color: white" frustumCulled="false"></a-entity>

        <a-text id="item" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.8 1.05 -2.4" 
            align="left" 
        >
        </a-text>

        <a-text id="nextop" color="white" 
            width="1.3"
            scale="1.2 0.8 1.2" 
            position="-0.8 0.93 -2.4" 
            align="left" 
        >
        </a-text> 

    <!-- GAUGES -->
     <!-- position vertical dos gauges mudada de 0.2 para 0.5 -->
    <a-entity 
        id="gauges-group" frustumCulled="false" 
    >
        <a-entity id="gauge-OEE" 
            position="-1.1 0.5 -2.4"  
            scale="0.35 0.35 0.35"
        >
            <a-ring id="ring-OEE" 
                color="blue" 
                radius-inner="0.35" 
                radius-outer="0.45"  
                theta-start="0" 
                theta-length="0"
            ></a-ring>
            <a-text id="text-OEE" 
                value="OEE: 100%"
                position="0 0.6 0" 
                align="center" 
                color="white"
            ></a-text>
        </a-entity>

        <a-entity id="gauge-Disponibilidade" 
            position="-0.4 0.5 -2.4"  
            scale="0.35 0.35 0.35"  
        >
            <a-ring id="ring-Disponibilidade" 
                color="orange" 
                radius-inner="0.35" 
                radius-outer="0.45"  
                theta-start="0" 
                theta-length="0"
            ></a-ring>
            <a-text id="text-Disponibilidade" 
                value="Disp: 100%" 
                position="0 0.6 0" 
                align="center" 
                color="white"
            ></a-text>
        </a-entity>

        <a-entity id="gauge-Performance" 
            position="0.4 0.5 -2.4"  
            scale="0.35 0.35 0.35"  
        >
            <a-ring id="ring-Performance" 
                color="green" 
                radius-inner="0.35" 
                radius-outer="0.45"  
                theta-start="0" 
                theta-length="0"
            ></a-ring>
            <a-text id="text-Performance" 
                value="Perf: 100%" 
                position="0 0.6 0" 
                align="center" 
                color="white"
            ></a-text>
        </a-entity>

        <a-entity id="gauge-Qualidade" 
            position="1.1 0.5 -2.4"  
            scale="0.35 0.35 0.35"  
        >
            <a-ring id="ring-Qualidade" 
                color="yellow" 
                radius-inner="0.35" 
                radius-outer="0.45"  
                theta-start="0" 
                theta-length="0"
            ></a-ring>
            <a-text id="text-Qualidade" 
                value="Qual: 100%" 
                position="0 0.6 0" 
                align="center" 
                color="white"
            ></a-text>
        </a-entity>
    </a-entity>
</a-scene>

    <script>
        navigator.mediaDevices
            .getUserMedia({ video: true })
            .then(initAR)
            .catch((err) => alert("Permissão de câmera negada:", err));
    </script>
</body>
</html>