
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- ler qr code -->
    <script src="https://unpkg.com/jsqr@1.3.1/dist/jsQR.js"></script>
    
    <script>
      //  trazer grand box com informações referentes aos botões quando clicados, status ou maintenance
      AFRAME.registerComponent('maintenance-cursor', {
          init: function() {
              var marker = this.el;

              marker.addEventListener('click', function() {
                  alert("manutenção");

                  const boxMaintenance = document.createElement('a-box');

                  boxMaintenance.setAttribute('position', '0 2.3 -3');
                  boxMaintenance.setAttribute('rotation', '0 0 0');
                  boxMaintenance.setAttribute('color', '#00a335');
                  boxMaintenance.setAttribute('scale', '2 2 1');
                  document.querySelector('a-scene').appendChild(boxMaintenance);
              });
          }
      });

      AFRAME.registerComponent('status-cursor', {
          init: function() {
              this.el.addEventListener('click', function() {
                  alert("status");

                  const boxStatus = document.createElement('a-box');
                  boxStatus.setAttribute('position', '0 2.3 -3');
                  boxStatus.setAttribute('rotation', '0 0 0');
                  boxStatus.setAttribute('color', '#00a335');
                  boxStatus.setAttribute('scale', '2 2 1');
                  document.querySelector('a-scene').appendChild(boxStatus);
              });
          }
      });
  </script>

  
    <style>
        #video {
            width: 100%;
            height: 100vh;
            object-fit: cover;
        }
        #scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: transparent;
        }
    </style>
</head>

<body>
    <a-scene 
        id="scene" 
        vr-mode-ui="enabled: false;"
        embedded arjs="sourceType: webcam; debugUIEnabled: false;"
    >
    <a-marker
        id="marker" 
        type="pattern" 
        url="https://cdn.glitch.global/469bf26b-d54a-42ba-b93a-9badfef4d1e2/pattern-frame1.patt?v=1722364839104" 
        position="0 0 0" 
        rotation="0 0 0"
    >   
        <a-entity 
            cursor="rayOrigin: mouse;" 
            raycaster="objects:.clickable; far: 10; showLine: true"
        ></a-entity>

        <a-box 
            id="grandbox" 
            position="0 2.3 -3" 
            rotation="0 0 0" 
            color="#00a335" 
            scale="2 2 1"
        ></a-box>

        <a-box 
            id="rightbox" 
            position="0.6 1 -3" 
            rotation="0 0 0" 
            color="#50788a" 
            scale="0.8  0.2 1" 
            maintenance-cursor class="clickable"
        ></a-box>

        <a-box 
            id="leftbox" 
            position="-0.6 1 -3" 
            rotation="0 0 0" 
            color="#50788a" 
            scale="0.8  0.2 1" 
            status-cursor class="clickable"
        ></a-box>

        <a-text value="maintenance" color="white" scale="1.8 1.8 1.8" position="0.6 1 -2.5" align="center" width="1.5"></a-text>
        <a-text value="status" color="white" scale="1.8 1.8 1.8" position="-0.6 1 -2.5" align="center" width="1.5"></a-text>
        
        <a-entity camera position="0 1.7 0">
            <video id="video" autoplay playsinline></video>
        </a-entity>
    </a-marker>
    </a-scene>
</body>
</html>
